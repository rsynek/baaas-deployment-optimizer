<?xml version="1.0" encoding="UTF-8"?>
<plannerBenchmark xmlns="https://www.optaplanner.org/xsd/benchmark"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="https://www.optaplanner.org/xsd/benchmark https://www.optaplanner.org/xsd/benchmark/benchmark.xsd">
  <benchmarkDirectory>data/benchmark</benchmarkDirectory>
  <parallelBenchmarkCount>4</parallelBenchmarkCount>
  <warmUpSecondsSpentLimit>60</warmUpSecondsSpentLimit>
  <inheritedSolverBenchmark>
    <solver>
      <environmentMode>REPRODUCIBLE</environmentMode>
      <solutionClass>org.kie.baaas.optimizer.domain.ServiceDeploymentSchedule</solutionClass>
      <entityClass>org.kie.baaas.optimizer.domain.Service</entityClass>
      <scoreDirectorFactory>
        <constraintProviderClass>org.kie.baaas.optimizer.solver.ServiceDeploymentConstraintProvider</constraintProviderClass>
        <initializingScoreTrend>ONLY_DOWN</initializingScoreTrend>
      </scoreDirectorFactory>
      <termination>
        <minutesSpentLimit>5</minutesSpentLimit>
      </termination>
    </solver>
  </inheritedSolverBenchmark>

  <solverBenchmark>
    <name>Default</name>
  </solverBenchmark>

  <solverBenchmark>
    <name>Custom move with late acceptance</name>
    <solver>
      <constructionHeuristic/>
      <localSearch>
        <unionMoveSelector>
          <changeMoveSelector/>
          <swapMoveSelector/>
          <pillarChangeMoveSelector/>
          <pillarSwapMoveSelector/>
          <moveIteratorFactory>
            <moveIteratorFactoryClass>org.kie.baaas.optimizer.solver.ServiceSpreadMoveIteratorFactory</moveIteratorFactoryClass>
          </moveIteratorFactory>
        </unionMoveSelector>
        <acceptor>
          <lateAcceptanceSize>500</lateAcceptanceSize>
        </acceptor>
        <forager>
          <acceptedCountLimit>1</acceptedCountLimit>
        </forager>
      </localSearch>
    </solver>
  </solverBenchmark>

  <solverBenchmark>
    <name>Tabu Search</name>
    <solver>
      <constructionHeuristic/>
      <localSearch>
        <unionMoveSelector>
          <changeMoveSelector/>
          <swapMoveSelector/>
          <pillarChangeMoveSelector/>
          <pillarSwapMoveSelector/>
        </unionMoveSelector>
        <acceptor>
          <entityTabuSize>7</entityTabuSize>
        </acceptor>
        <forager>
          <acceptedCountLimit>2000</acceptedCountLimit>
        </forager>
      </localSearch>
    </solver>
  </solverBenchmark>

  <solverBenchmark>
    <name>Late Acceptance</name>
    <solver>
      <constructionHeuristic/>
      <localSearch>
        <unionMoveSelector>
          <changeMoveSelector/>
          <swapMoveSelector/>
        </unionMoveSelector>
        <acceptor>
          <lateAcceptanceSize>500</lateAcceptanceSize>
        </acceptor>
        <forager>
          <acceptedCountLimit>1</acceptedCountLimit>
        </forager>
      </localSearch>
    </solver>
  </solverBenchmark>
</plannerBenchmark>
